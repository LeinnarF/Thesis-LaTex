%%%%%%%%%%%%%%%%%%% D O  N O T  D E L E T E %%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                            %%
%%  BulSU BS Math Thesis Manuscript                           %%
%%  LateX Template (set-up package)                           %%
%%  Version 2025-01 (12 June 2025)                            %%
%%                                                            %%
%%  Load as usepackage{bulsuthesis} in Thesis-Main.tex        %%
%%  to implement the format and layout of the BS Mathematcs   %%
%%  undergraduate thesis of the Collge of Science,            %%
%%  Bulacan State University.                                 %%
%%                                                            %%
%%  Original Author:                                          %%
%%  Harris R. Dela Cruz                                       %%
%%  Bulacan State University                                  %%
%%  e-mail: harris.delacruz@bulsu.edu.ph                      %%
%%                                                            %%
%%  Permission: Any student of the University is hereby given %%
%%  permission to use this template and the accompanying      %%
%%  Thesis-Main.tex files provided the original author        %%
%%  is given due acknwledgement.                              %%
%%                                                            %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%-D O  N O T  D E L E T E-%%%%%%%%%%%%%%%%%%%%

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{bulsuthesis}[2025/06/12 bulsuthesis package]

%%%%%%%%%%%%%%%%%%%%%%%
% LOAD CORE PACKAGES %%
%%%%%%%%%%%%%%%%%%%%%%%
\label{core_packages}
\RequirePackage[T1]{fontenc}
\RequirePackage{microtype} % font spacing
% \RequirePackage{libertine} % Main Serif font (Linux Libertine)
% \RequirePackage[cmintegrals,cmbraces,vvarbb]{newtxmath} % Math font
\RequirePackage[scaled=0.95]{zi4} % Monospaced font (Inconsolata for MiKTeX)
\RequirePackage{graphicx}	% for customizing graphics/figures
\RequirePackage{geometry} 	% for paper sizes/dimensions
\RequirePackage{setspace} 	% for customizing spacing
\RequirePackage{indentfirst}% indent first sentence of every paragraph
\RequirePackage[shortlabels]{enumitem} % for customizing lists
\RequirePackage{fancyhdr}	% for tweaking header and footer
\RequirePackage{array,multicol,multirow,color,calc}
% for customizing tables
\RequirePackage{chngcntr}	% for customizing table/figure numbering
\RequirePackage{titlesec}	% for customizing chapter/section titles
\RequirePackage[titles]{tocloft}% for customizing content lists
\RequirePackage{etoolbox}	% for patching e-TeX to LaTeX
\RequirePackage{appendix}	% for customizing the appendix
\RequirePackage{calligra,miama} % for cursive fnt used in dedication
\RequirePackage{caption}	% for customizing table/figure captions
\RequirePackage{subcaption} % for multiple images in a figure
\RequirePackage{tabularx}   % for using X coluns in tabular environment
\RequirePackage{pbox}	    % for using p boxes
\RequirePackage{listings}   % for inserting computer codes
\RequirePackage{xcolor}     % for customizng colors

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% BASIC INFORMATION AND DEGREE SPECIFICATION %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\label{basic_info}

% Declare or override thesis fields
\renewcommand{\author}[1]{\gdef\@author{#1}}
\renewcommand{\title}[1]{\gdef\@title{#1}}
\providecommand{\college}[1]{\gdef\@college{#1}}
\providecommand{\csdean}[1]{\gdef\@csdean{#1}}
\providecommand{\papertype}[1]{\gdef\@papertype{#1}}
\providecommand{\degree}[1]{\gdef\@degree{#1}}
\providecommand{\specialization}[1]{\gdef\@specialization{#1}}
\providecommand{\adviser}[1]{\gdef\@adviser{#1}}
\providecommand{\advisertitle}[1]{\gdef\@advisertitle{#1}}
\providecommand{\advisersuffix}[1]{\gdef\@advisersuffix{#1}}
\providecommand{\panelchair}[1]{\gdef\@panelchair{#1}}
\providecommand{\paneltwo}[1]{\gdef\@paneltwo{#1}}
\providecommand{\panelthree}[1]{\gdef\@panelthree{#1}}
\providecommand{\ddate}[1]{\gdef\@ddate{#1}}
\providecommand{\fronttitle}[1]{\gdef\@fronttitle{#1}}
\providecommand{\authors}[1]{\gdef\@authors{#1}}

%==================================================%
%= DEFAULT VALUES                                 =%
%= Values that auomatically appears in the field  =%
%= when left empty or undeclared                  =%
%==================================================%
%College information
\global\def\@college{\mbox{College of Science}}
\global\def\@csdean{\mbox{Name CS Dean}}
\global\def\@papertype{\mbox{Thesis}}
\global\def\@degree{Bachelor of Science in Mathematics}
\global\def\@specialization{Computer Science}

%Thesis Information
\global\def\@title{Title of a Thesis}
\global\def\@fronttitle{Front Page Title of a Thesis}
\global\def\@author{Author's Name}
\global\def\@authors{Author 1, Author 2, and Last Author}
\global\def\@ddate{\ifcase\the\month\or January\or
	February\or March\or April\or May\or June\or July\or August\or
	September\or October\or November\or December\fi\space \number\the\year}
\global\def\@adviser{Thesis Adviser}
\global\def\@advisertitle{}
\global\def\@advisersuffix{}
\global\def\@panelchair{Panel Chair}
\global\def\@paneltwo{Panel Member 2}
\global\def\@panelthree{Panel Member 3}

%%%%%%%%%%%%%%%%
%% TITLE PAGE %%
%%%%%%%%%%%%%%%%
% Change the \maketitle to follow the BulSU guidelines
\label{titlepage}
\renewcommand{\maketitle}
{\begin{titlepage}
%	\addcontentsline{toc}{chapter}{TITLE PAGE}
	\setcounter{page}{1}
	\centering\onehalfspacing % Set the line spacing to 1 for the title page.
	
	\begin{minipage}[c][3\baselineskip][c]{0.9\linewidth}
		\centering\sffamily\bfseries\large\MakeUppercase{\@fronttitle}
	\end{minipage}
	
	\vspace{1in}
	
	An Undergraduate {\@papertype} Presented to\\
	the Faculty of the {\@college}\\
	of Bulacan State University\\
	City of Malolos, Bulacan
	
	\vfill
	
	In Partial Fulfillment of the Requirements for the Degree\\
	{\@degree} with \\
	Specialization in {\@specialization}\\
	
	\vfill
	
	By \\
	{\MakeUppercase{\@author}}\\
	
	\vfill
	
	Under the supervision of \\
	{\@advisertitle\MakeUppercase{\@adviser}}\\
	
	\vfill
	
	{\@ddate}
	\end{titlepage}
	\setcounter{page}{2}
}

%%%%%%%%%%%%%%%%%%%%
%  APPROVAL SHEET %%
%%%%%%%%%%%%%%%%%%%%
\def\approvalsheet{%
	\chapter*{APPROVAL SHEET}
	\label{approvalsheet}
	\addcontentsline{toc}{chapter}{APPROVAL SHEET}
	\thispagestyle{empty}
	
	In partial fulfillment of the requirements for the degree {\@degree} with specialization in {\@specialization}, this thesis entitled {\bfseries\MakeUppercase``\@title''} has been prepared and submitted by \@authors, who are hereby recommended for oral examination.
	
	\vspace{1em}
	
	{\singlespacing 
		\hfill \pbox{5in}{\relax\ifvmode\centering\fi {\sffamily\bfseries\@adviser\@advisersuffix} \\ {\sffamily Adviser}}
	}
	
	\vspace{\stretch{1}}
	
	The document is approved in partial fulfillment of the requirements for the degree {\@degree} with specialization in {\@specialization} by the Committee on Oral Examination.
	
	\vspace{1em}
	
	{\singlespacing \centering
		\begin{tabularx}{\linewidth}{>{\centering\arraybackslash}X>{\centering\arraybackslash}X}
			\multicolumn{2}{C{\linewidth}}{\bfseries\@panelchair}\\
			\multicolumn{2}{C{\linewidth}}{Chairperson}\\[4ex]
			\textbf{\@paneltwo} & \textbf{\@panelthree}\\
			Member & Member\\
		\end{tabularx}
	}
	
	\vspace{\stretch{1}}
	
	The document is accepted and approved in partial fulfillment of the requirements for the degree {\@degree} with specialization in {\@specialization} by the Committee on Oral Examination. 
	
	\vspace{1 em}
	
	{\singlespacing
		\hfill \pbox{5in}{\relax\ifvmode\centering\fi%
			{\sffamily\bfseries \@csdean} \\ {\sffamily Dean, College of Science}
		}
	}
	
	\vspace{\stretch{1}}
	
	\noindent\textbf{\@ddate}
	
	\cleardoublepage
}

%%%%%%%%%%%%
%% LAYOUT %%
%%%%%%%%%%%%
\label{layout}
%===============%
% Page geometry %
%===============%
\geometry{
	top=1in,left=1.5in,right=1in,bottom=1in,
	headheight=15pt,
	footskip=36pt,
}

%======================%
% Paragraph formatting %
%======================%
\setlength{\parindent}{0.5in}	%change the length of indentation
\tolerance=1
\emergencystretch=\maxdimen
\hyphenpenalty=9999
\hbadness=9999

%==============%
% List Spacing %
%==============%
\setlist[itemize]{noitemsep, topsep=0pt} 
\setlist[enumerate]{noitemsep, topsep=0pt} 
\setlist[description]{noitemsep, topsep=0pt} 

%===================%
% Header and Footer %
%===================%
\fancyhfinit{\sffamily}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\small\leftmark}
\fancyhead[R]{\small\thepage}
\renewcommand{\headrulewidth}{0pt}

\fancypagestyle{plain}{%pagestyle with no header
	\fancyhf{}% Clear header/footer
	\fancyfoot[C]{\thepage}
	\renewcommand{\headrulewidth}{0pt}%
}%

%%%%%%%%%%%%%%%%%%%%%%%%%
%% FRONTMATTER ENVIRONMENTS %%
%%%%%%%%%%%%%%%%%%%%%%%%%
\label{frontmatter}

\renewenvironment{abstract}{%
	\chapter*{ABSTRACT}
	\addcontentsline{toc}{chapter}{ABSTRACT}
	\begingroup
}{\clearpage\endgroup}

\newenvironment{acknowledgment}{%
	\chapter*{ACKNOWLEDGMENT}
	\addcontentsline{toc}{chapter}{ACKNOWLEDGMENT}
	\begingroup
}{\clearpage\endgroup}

\newenvironment{dedication}{%
	\chapter*{DEDICATION}
	\addcontentsline{toc}{chapter}{DEDICATION}
	\begingroup
}{\clearpage\endgroup}

\newenvironment{listofnotations}{%
	\chapter*{LIST OF NOTATIONS}
	\addcontentsline{toc}{chapter}{LIST OF NOTATIONS}
	\begingroup
}{\clearpage\endgroup}

\newenvironment{curriculumvitae}{%
	\clearpage
	\phantomsection
	\addcontentsline{toc}{chapter}{CURRICULUM VITAE}
	\begingroup
	\centering\pagestyle{empty}
	\null
	\vfill
	{\Huge\bfseries CURRICULUM VITAE}
	\vfill
	\clearpage
}{\endgroup}

\newcommand{\chaptercentered}[1]{%
	\cleardoublepage
	\thispagestyle{empty}%
	\refstepcounter{chapter}%
	\phantomsection
	\addcontentsline{toc}{chapter}{\protect\numberline{\thechapter}#1}%
	\chaptermark{#1}
	\begin{center}
		\vspace*{0.4\textheight}
		{\centering\normalfont\normalsize\bfseries
			\MakeUppercase{\chaptertitlename\ \thechapter}\par
			%\vspace{1em}
			\uppercase{#1}\par}
		\vfill
	\end{center}
	\newpage
	\pagestyle{fancy}% â† reapply fancy style starting here
}

\newenvironment{preliminary}%
{\pagestyle{plain}\pagenumbering{roman}}%
{\pagenumbering{arabic}}

\newcommand{\listappendixname}{LIST OF APPENDICES}
\newlistof{appendix}{apc}{\listappendixname}


%%%%%%%%%%%%%%
%% APPENDIX %%
%%%%%%%%%%%%%%
\label{appendix}
%\makeatletter

% --- Begin Appendices Customization ---
\AtBeginEnvironment{appendices}{%
	\cleardoublepage
	\setcounter{table}{0}
	\setcounter{figure}{0}
	\counterwithin{figure}{chapter}
	\counterwithin{table}{chapter}
	
	% Redefine \@chapter for appendices
	\def\@chapter[#1]#2{%
		\ifnum \c@secnumdepth >\m@ne
		\refstepcounter{chapter}%
		\typeout{\@chapapp\space\thechapter.}%
		\addcontentsline{toc}{chapter}{\protect\numberline{\thechapter}\texorpdfstring{#1}{#1}}%
		\else
		\addcontentsline{toc}{chapter}{\texorpdfstring{#1}{#1}}%
		\fi
		\chaptermark{#1}%
		\addtocontents{lof}{\protect\addvspace{10\p@}}%
		\addtocontents{lot}{\protect\addvspace{10\p@}}%
		\if@twocolumn
		\@topnewpage[\@makechapterhead{#2}]%
		\else
		\@makechapterhead{#2}%
		\@afterheading
		\fi
	}
	
	% Appendices title page
	\thispagestyle{empty}
	\phantomsection
	\addcontentsline{toc}{chapter}{APPENDICES}
	\begin{center}
		\null 
		\vfill
		{\Huge\bfseries APPENDICES}
		\vfill
	\end{center}
	
	% Temporarily redirect TOC writes
	\write\@auxout{%
		\string\let\string\latex@tf@toc\string\tf@toc%
		\string\let\string\tf@toc\string\tf@apc%
	}%
}

\AtEndEnvironment{appendices}{%
	% Restore original TOC file handle
	\write\@auxout{%
		\string\let\string\tf@toc\string\latex@tf@toc%
	}%
}
% --- End Appendices Customization ---

%\makeatother



%%%%%%%%%%%%%%%%%%%%%%%
%% SECTIONING FORMAT &&
%%%%%%%%%%%%%%%%%%%%%%%
\label{sectioning}
\setcounter{secnumdepth}{0}	%<-No section numbering (only chpaters)

\titleformat{\chapter}[display] % customize the format of chapter title
{\centering\normalfont\normalsize\bfseries}
{\MakeUppercase{\chaptertitlename\ \thechapter}\filcenter}
{0pt}%sep
{\centering\uppercase}
{\normalsize\filcenter}
\titlespacing{\chapter}{0pt}{-27pt}{18pt}
\renewcommand{\thechapter}{\Roman{chapter}}

\titleformat{\section} % customize the format of section title
{\normalfont\normalsize\bfseries}
{\thesection}
{1em}
{}
\titlespacing{\section}{0pt}{2ex plus 1ex minus 0ex}{0ex}

\titleformat{\subsection} % customize the format of subsection title
{\normalfont\normalsize\itshape\bfseries}
{\thesubsection}
{1em}
{}
\titlespacing{\subsection}{0pt}{2ex plus 1ex minus 0ex}{0ex}

\titleformat{\subsubsection} % customize the format of subsubsection title
{\normalfont\normalsize\itshape}
{\thesubsubsection}
{1em}
{}
\titlespacing{\subsubsection}{0pt}{2ex plus 1ex minus 0ex}{0ex}

%========================%
% TABLE/FIGURES/EQUATION %
%========================%
\label{table_and_figures}
%Define new column type
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}p{#1}}

\DeclareCaptionLabelSeparator*{spaced}{\\[1ex]}
\DeclareCaptionFont{helvet}{\fontseries{n}\fontfamily{phv}\selectfont}
\DeclareCaptionFont{helvtext}{\fontfamily{phv}\itshape\selectfont}  % italic Helvetica
\DeclareCaptionFont{helvlabel}{\fontfamily{phv}\bfseries\selectfont} % bold Helvetica


%Table caption iin APA 7
\captionsetup[table]{
	font=sf,
	labelfont=bf,
	textfont=it, 
	format=plain,
	justification=justified,
	singlelinecheck=false,
	labelsep=spaced,skip=12pt
}
%Figure caption in APA 7
\captionsetup[figure]{
	font=sf,
	labelfont=bf,
	textfont=it, 
	format=plain,
	justification=justified,
	singlelinecheck=false,
	labelsep=spaced,skip=12pt
}
\captionsetup[sidewaysfigure]{
	font=sf,
	labelfont=bf,
	textfont=it, 
	format=plain,
	justification=justified,
	singlelinecheck=false,
	labelsep=spaced,skip=12pt
}
%Subfigure caption - alpha/centered
\captionsetup[subfigure]{font=footnotesize,
	labelfont=up,
	justification=centering
}	
%Subfigure caption - alpha/centered
\captionsetup[subfigure]{%
	font=helvet,
	labelfont=helvet,
	textfont=helvet,
	justification=centering,
}	

% Define a Note environment for figures/tables
\newcommand{\ftnote}[1]{%
	\begin{minipage}{\textwidth}
		\vspace{0.5em}%
		\small\normalfont\textit{Note.} #1
	\end{minipage}%
}

\counterwithout{table}{chapter}  % continuous numbering of table
\counterwithout{figure}{chapter} % continuous numbering of figure
\counterwithout{equation}{chapter} % continuous numbering of equation

% Patch tabular environments to use sans-serif font
\AtBeginEnvironment{tabular}{\sffamily}
\AtBeginEnvironment{tabularx}{\sffamily}
\AtBeginEnvironment{longtable}{\sffamily} % If using longtable

%%%%%%%%%%%%%%%%%%%%%%%
%% TABLE OF CONTENTS %%
%%%%%%%%%%%%%%%%%%%%%%%

\setcounter{tocdepth}{1} 	%<-toc level shows only up to sec

%setting the indentation of section in the TOC
\setlength{\cftchapnumwidth}{2em}
\setlength{\cftsecindent}{2em}
\setlength{\cftbeforechapskip}{3pt}

\makeatletter % adding content in TOC without page number
\def\addcontentslinex#1#2#3{%
	\addtocontents{#1}{\protect\contentsline{#2}{#3}{}{}\protected@file@percent}}
\makeatother

\makeatletter %customizing dotted lines
\renewcommand*\l@figure{\@dottedtocline{1}{1em}{3.5em}}% Default: 1.5em/2.3em
\let\l@table\l@figure
\makeatother

%%This will remove chapter-related separation in the list environment tables and figures
\newcommand*{\noaddvspace}{\renewcommand*{\addvspace}[1]{}}
\addtocontents{lof}{\protect\noaddvspace}
\addtocontents{lot}{\protect\noaddvspace}
\addtocontents{apc}{\protect\noaddvspace}

\let\oldcontentsline\contentsline
\newcommand{\nopagecontentsline}[3]{\oldcontentsline{#1}{#2}{}}


%%%%%%%%%%%%%%%%%%%
%% CODE LISTINGS %%
%%%%%%%%%%%%%%%%%%%
%New colors defined below
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

%Code listing style named "mystyle"
\lstdefinestyle{mystyle}{
%	backgroundcolor=\color{backcolour},   
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,         
	breaklines=true,                 
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=2
}

